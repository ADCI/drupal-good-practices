<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Cache system - Drupal Good Practices</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Drupal Good Practices</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Articles <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../install/">Install</a>
</li>

                        
                            
<li >
    <a href="../layout/">Layout building</a>
</li>

                        
                            
<li >
    <a href="../users/">Users</a>
</li>

                        
                            
<li >
    <a href="../content/">Content authoring</a>
</li>

                        
                            
<li >
    <a href="../multilanguage/">Multilanguage</a>
</li>

                        
                            
<li class="active">
    <a href="./">Cache system</a>
</li>

                        
                            
<li >
    <a href="../search/">Search</a>
</li>

                        
                            
<li >
    <a href="../security/">Security</a>
</li>

                        
                            
<li >
    <a href="../forms/">Forms</a>
</li>

                        
                            
<li >
    <a href="../theming/">Theming</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced articles <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../advanced/testing/">Testing</a>
</li>

                        
                            
<li >
    <a href="../../advanced/deploy/">Deploy</a>
</li>

                        
                            
<li >
    <a href="../../advanced/drush/">Drush</a>
</li>

                        
                            
<li >
    <a href="../../advanced/git/">Git</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../modules/administration/">Administration</a>
</li>

                        
                            
<li >
    <a href="../../modules/content/">Content authoring</a>
</li>

                        
                            
<li >
    <a href="../../modules/development/">Development</a>
</li>

                        
                            
<li >
    <a href="../../modules/building/">Site building</a>
</li>

                        
                            
<li >
    <a href="../../modules/utilites/">Utilites</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../multilanguage/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../search/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/ADCI/drupal-good-practices.git">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#cache-and-performance">Cache and performance</a></li>
        
            <li><a href="#table-of-contents">Table of Contents</a></li>
        
            <li><a href="#core-cache">Core cache</a></li>
        
            <li><a href="#anonymous-cache">Anonymous cache</a></li>
        
            <li><a href="#views-cache">Views cache</a></li>
        
            <li><a href="#panels-cache">Panels cache</a></li>
        
            <li><a href="#entity-cache">Entity cache</a></li>
        
            <li><a href="#external-cache-storage">External cache storage</a></li>
        
            <li><a href="#todo-http-cache-headers-basics-cache-control-etc">@todo HTTP cache headers basics (Cache-control, etc.)</a></li>
        
            <li><a href="#todo-different-cache-implementations-for-different-bins-configuration-via-settingsphp-drupalfakecache">@todo Different cache implementations for different bins configuration via settings.php. DrupalFakeCache</a></li>
        
            <li><a href="#todo-nginx-and-apache-configuration-for-caching-of-assets">@todo Nginx (and Apache?) configuration for caching of assets</a></li>
        
            <li><a href="#summary">Summary</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="cache-and-performance">Cache and performance</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#core-cache">Core cache</a></li>
<li><a href="#anonymous-cache">Anonymous cache</a></li>
<li><a href="#views-cache">Views cache</a></li>
<li><a href="#panels-cache">Panels cache</a></li>
<li><a href="#entity-cache">Entity cache</a></li>
<li><a href="#external-cache-storage">External cache storage</a></li>
<li><a href="#summary">Summary</a></li>
</ul>
<h2 id="core-cache">Core cache</h2>
<p>Drupal core provides just a few options for caching, but even these options enabled can noticeably improve performance.</p>
<p>Drupal core cache options are:</p>
<ul>
<li>Blocks cache.</li>
<li>Full page cache (for anonymous visitors).</li>
</ul>
<h2 id="anonymous-cache">Anonymous cache</h2>
<p>If there are no differences in behavior on backend for different anonymous users (which is usually true) then luckily the whole pages can be cached.
Pages' caching which avoids Drupal run to build and render page's content drastically improves performance.
This cache can be made even faster by using of <a href="#external-cache-storage">external storages</a> for such cache.</p>
<h2 id="views-cache">Views cache</h2>
<p>In almost (all) cases there is <a href="https://www.drupal.org/project/views">Views</a> module installed on a Drupal 7 site.
Outputs built with <strong>Views</strong> can (and should) also be cached. Views is shipped with time-based cache so lifetime is set for cache and after passing this time cache become obsolete and rebuilt. Both raw query result and rendered output can be cached.</p>
<p>You'll definitely want to show relevant content on your site and show updated or new content (almost) immediately after making changes. With default <strong>Views</strong> cache you'll have to set small enough cache lifetimes to achieve this, but performance gain will be less than it could be (cache rebuilds may happen even if there are no updates in content) and updates will still happen not immediately.
<a href="https://www.drupal.org/project/views_content_cache">Views content cache</a> module is more preferred in this case - it provides alternative <strong>Views</strong> cache plugin which rebuilds cache when changes happen in content.</p>
<h2 id="panels-cache">Panels cache</h2>
<p>When using <a href="https://www.drupal.org/project/panels">Panels</a> you can leverage caching for them as well.
<strong>Panels</strong> allow to cache the whole panel or parts of it.
Similar to content-based caching solution for <strong>Views</strong> module, there is <a href="https://www.drupal.org/project/panels_content_cache">Panels Content Cache</a> module for <strong>Panels</strong>.</p>
<h2 id="entity-cache"><a href="https://www.drupal.org/project/entitycache">Entity cache</a></h2>
<p>Most of content on Drupal 7 site is stored in different types of entities (nodes, users, taxonomy terms and other) so there are always entities loaded to build and render some content on pages.
<strong>Entity cache</strong> allows to put entire entity (with properties, fields and other data) to cache for load times improvements.
There is no configuration for this module, just enable it to make it working. After installation the module will make core entities (nodes, users, taxonomy terms) entire cacheable, but there are many other contrib modules which define own entity types and are integrated with the <strong>Entity cache</strong>.
Custom entity types can be easily integrated with the <strong>Entity cache</strong> as well.
Again, module gives very good improvements when <a href="#external-cache-storage">external storages</a> are used to store entities cache. It can be used with default Drupal 7 cache storage (database) of course, but effect will be small enough.</p>
<h2 id="external-cache-storage">External cache storage</h2>
<p>Database is very slow solution for storing cache and it's highly recommended to use other solutions to store cache.</p>
<h3 id="key-value-storage">Key-value storage</h3>
<p><a href="https://www.drupal.org/project/redis">Redis</a> and <a href="https://www.drupal.org/project/memcache">Memcache</a> allows to store cache in RAM.
Use one of this if you have enough RAM - they highly increase performance, especially in combination with <a href="#entity-cache">Entity cache</a>.</p>
<h3 id="nosql-storage-mongodb-and-other">NoSQL storage (MongoDB and other)</h3>
<p>It's possible to store cache for example in <a href="https://www.drupal.org/project/mongodb">MongoDB</a>.</p>
<h3 id="page-caching">Page caching</h3>
<p>Most effective way when dealing with caching for anonymous users is when Drupal isn't triggered at all for delivering pages content.</p>
<p>Most popular solutions to cache pages for anonymous users on server are:</p>
<ul>
<li><a href="http://nginx.org/en/">Nginx</a> - web server, reverse proxy server as well as a load balancer and an HTTP cache.</li>
<li><a href="https://www.varnish-cache.org/">Varnish</a> - very popular HTTP accelerator with a lot of configuration options.</li>
</ul>
<h2 id="todo-http-cache-headers-basics-cache-control-etc">@todo HTTP cache headers basics (Cache-control, etc.)</h2>
<h2 id="todo-different-cache-implementations-for-different-bins-configuration-via-settingsphp-drupalfakecache">@todo Different cache implementations for different bins configuration via settings.php. DrupalFakeCache</h2>
<h2 id="todo-nginx-and-apache-configuration-for-caching-of-assets">@todo Nginx (and Apache?) configuration for caching of assets</h2>
<h2 id="summary">Summary</h2>
<p>Always think about caching and leverage it, don't launch your Drupal sites without any caching enabled.
Always plan your caching strategy for both anonymous and authenticated visitors, pay attention to sensitive data (for authenticated visitors) - it may happen that data for one user will be cached and accidentally shown to another one.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
